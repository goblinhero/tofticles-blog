<!DOCTYPE html>
<html
  dir="ltr"
  lang="en"
  data-theme=""
  
    class="html theme--light"
  
><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <title>
    
      
        Fiscal Period and Dates |
      Magnus Toftdal

  </title>

  
  <meta charset="utf-8" /><meta name="generator" content="Hugo 0.124.0"><meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="author" content="Magnus Toftdal" />
  <meta
    name="description"
    content="There are no silver bullets! 
Here, have mine
"
  />
  
  
    
    
    <link
      rel="stylesheet"
      href="/scss/main.min.772eefee9824c26da5d3828c2507ea318c8e7a37b0b1d18cd4f224edc2755fea.css"
      integrity="sha256-dy7v7pgkwm2l04KMJQfqMYyOejewsdGM1PIk7cJ1X&#43;o="
      crossorigin="anonymous"
      type="text/css"
    />
  

  
  <link
    rel="stylesheet"
    href="/css/markupHighlight.min.73ccfdf28df555e11009c13c20ced067af3cb021504cba43644c705930428b00.css"
    integrity="sha256-c8z98o31VeEQCcE8IM7QZ688sCFQTLpDZExwWTBCiwA="
    crossorigin="anonymous"
    type="text/css"
  />
  
    
    
    <link
      rel="stylesheet"
      href="/css/custom.min.910eb93950d8bbbc989d4d1c78356baa8a2f649e4956e003b91741fe931354b9.css"
      integrity="sha256-kQ65OVDYu7yYnU0ceDVrqoovZJ5JVuADuRdB/pMTVLk="
      crossorigin="anonymous"
      media="screen"
    />
  
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/fontawesome.min.7d272de35b410fb165377550cdf9c4d3a80fbbcc961e111914e4d5c0eaf5729f.css"
    integrity="sha256-fSct41tBD7FlN3VQzfnE06gPu8yWHhEZFOTVwOr1cp8="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/solid.min.55d8333481b07a08e07cf6f37319753a2b47e99f4c395394c5747b48b495aa9b.css"
    integrity="sha256-VdgzNIGwegjgfPbzcxl1OitH6Z9MOVOUxXR7SLSVqps="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/regular.min.a7448d02590b43449364b6b5922ed9af5410abb4de4238412a830316dedb850b.css"
    integrity="sha256-p0SNAlkLQ0STZLa1ki7Zr1QQq7TeQjhBKoMDFt7bhQs="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link
    rel="stylesheet"
    href="/fontawesome/css/brands.min.9ed75a5d670c953fe4df935937674b4646f92674367e9e66eb995bb04e821647.css"
    integrity="sha256-ntdaXWcMlT/k35NZN2dLRkb5JnQ2fp5m65lbsE6CFkc="
    crossorigin="anonymous"
    type="text/css"
  />
  
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />

  <link rel="canonical" href="http://localhost:1313/2023/fiscal-period-and-dates/" />

  
  
  
  
  <script
    type="text/javascript"
    src="/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js"
    integrity="sha256-&#43;RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI="
    crossorigin="anonymous"
  ></script>

  
    
    
    <script
      type="text/javascript"
      src="/js/anatole-theme-switcher.min.d6d329d93844b162e8bed1e915619625ca91687952177552b9b3e211014a2957.js"
      integrity="sha256-1tMp2ThEsWLovtHpFWGWJcqRaHlSF3VSubPiEQFKKVc="
      crossorigin="anonymous"
    ></script>
  

  


  
  <meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Fiscal Period and Dates"/>
<meta name="twitter:description" content="C# and date handling&hellip; I need a rope and a shovel."/>



  
  <meta property="og:title" content="Fiscal Period and Dates" />
<meta property="og:description" content="C# and date handling&hellip; I need a rope and a shovel." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://localhost:1313/2023/fiscal-period-and-dates/" /><meta property="article:section" content="2023" />
<meta property="article:published_time" content="2023-11-23T14:39:18+01:00" />
<meta property="article:modified_time" content="2023-11-23T14:39:18+01:00" /><meta property="og:site_name" content="Adventures of Tofticles" />



  
  
  
  
  <script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "articleSection": "2023",
        "name": "Fiscal Period and Dates",
        "headline": "Fiscal Period and Dates",
        "alternativeHeadline": "",
        "description": "
      
        C# and date handling\u0026hellip; I need a rope and a shovel.


      


    ",
        "inLanguage": "en-us",
        "isFamilyFriendly": "true",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/localhost:1313\/2023\/fiscal-period-and-dates\/"
        },
        "author" : {
            "@type": "Person",
            "name": "Magnus Toftdal"
        },
        "creator" : {
            "@type": "Person",
            "name": "Magnus Toftdal"
        },
        "accountablePerson" : {
            "@type": "Person",
            "name": "Magnus Toftdal"
        },
        "copyrightHolder" : {
            "@type": "Person",
            "name": "Magnus Toftdal"
        },
        "copyrightYear" : "2023",
        "dateCreated": "2023-11-23T14:39:18.00Z",
        "datePublished": "2023-11-23T14:39:18.00Z",
        "dateModified": "2023-11-23T14:39:18.00Z",
        "publisher":{
            "@type":"Organization",
            "name": "Magnus Toftdal",
            "url": "http://localhost:1313/",
            "logo": {
                "@type": "ImageObject",
                "url": "http:\/\/localhost:1313\/favicon-32x32.png",
                "width":"32",
                "height":"32"
            }
        },
        "image": 
      [
      ]

    ,
        "url" : "http:\/\/localhost:1313\/2023\/fiscal-period-and-dates\/",
        "wordCount" : "405",
        "genre" : [ ],
        "keywords" : [ ]
    }
  </script>


</head>
<body class="body">
    <div class="wrapper">
      <aside
        
          class="wrapper__sidebar wrapper__sidebar--hidden"
        
      ><div
  class="sidebar
    animated fadeInDown
  "
>
  <div class="sidebar__content">
    <div class="sidebar__introduction">
      <img
        class="sidebar__introduction-profileimage"
        src="/images/tofticles.jpg"
        alt="profile picture"
      />
      
        <div class="sidebar__introduction-title">
          <a href="/">Adventures of Tofticles</a>
        </div>
      
      <div class="sidebar__introduction-description">
        <p>There are no silver bullets! <br />Here, have mine<br /></p>
      </div>
    </div>
    <ul class="sidebar__list">
      
        <li class="sidebar__list-item">
          <a
            href="https://helvede.net/@tofticles"
            target="_blank"
            rel="noopener me"
            aria-label="mastodon"
            title="mastodon"
          >
            <i class="fa-brands fa-mastodon fa-2x" aria-hidden="true"></i>
          </a>
        </li>
      
        <li class="sidebar__list-item">
          <a
            href="https://www.linkedin.com/in/magnus-toftdal/"
            target="_blank"
            rel="noopener me"
            aria-label="Linkedin"
            title="Linkedin"
          >
            <i class="fab fa-linkedin fa-2x" aria-hidden="true"></i>
          </a>
        </li>
      
        <li class="sidebar__list-item">
          <a
            href="mailto:toftdal@hey.com"
            target="_blank"
            rel="noopener me"
            aria-label="e-mail"
            title="e-mail"
          >
            <i class="fas fa-envelope fa-2x" aria-hidden="true"></i>
          </a>
        </li>
      
    </ul>
  </div><footer class="footer footer__sidebar">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        Magnus Toftdal
        2024
      
    </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js"
    integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ="
    crossorigin="anonymous"
  ></script></div>
</aside>
      <main
        
          class="wrapper__main wrapper__main--fullscreen"
        
      >
        <header class="header"><div
  class="
    animated fadeInDown
  "
>
  <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false">
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
    <span aria-hidden="true" class="navbar-burger__line"></span>
  </a>
  <nav class="nav">
    <ul class="nav__list" id="navMenu">
      
      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/"
              
              title=""
              >Home</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/index.xml"
              
              title=""
              >RSS</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/about"
              
              title=""
              >About</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/2024"
              
              title=""
              >2024</a
            >
          </li>
        

      
        
        
          <li class="nav__list-item">
            
            <a
              
              href="/2023"
              
              title=""
              >2023</a
            >
          </li>
        

      
    </ul>
    <ul class="nav__list nav__list--end">
      
      
        <li class="nav__list-item">
          <div class="themeswitch">
            <a title="Switch Theme">
              <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a>
          </div>
        </li>
      
    </ul>
  </nav>
</div>
</header>
  <div
    class="post 
      animated fadeInDown
    "
  >
    
    <div class="post__content">
      <h1>Fiscal Period and Dates</h1>
      <p>The code can be found <a href="https://github.com/goblinhero/Anex/pull/27">here</a>.</p>
<p>If you haven&rsquo;t watched <a href="https://www.youtube.com/watch?v=-5wpm-gesOY">Tom Scott</a>, yet - go do so. You&rsquo;ll come back knowing at least a bit about the pains we are talking about when it comes to handling date and time.</p>
<p>In accounting we use economical dates, ie. there is no time part. Same as you do with your birthday - you (probably) don&rsquo;t keep track at which point in the day you actually started breathing oxygen. Time-zones are a constant pain if you use the built-in <code>DateTime</code> type in C#, because a DateTime can be in one of three states:</p>
<pre><code>Local           Basically, what is the time according to the server's timezone taking into account DST and all that crap. (important distinction - your client might be in another zone)
Utc             Basically, what is the time on the date-line - also known as Zulu-time (this is used by the military among others when we -really- don't want to arrive an hour late or early)
Unspecified     Yeah, this one is wonky - basically, we have not (yet) decided (sadly, this is the default)
</code></pre>
<h3 id="databases-are-smart">Databases are smart</h3>
<p>For as long as I can remember, databases have supported date-only columns (for good reason - back then storage was -expensive-, so if you could save a few bytes here and there, you absolutely did!). MSSQL, PostGres, MySQL and MariaDB calls it date as the data type.</p>
<h3 id="enter-dateonly-to-save-the-day">Enter DateOnly to save the day?</h3>
<p>In .NET 6, Microsoft added DateOnly and TimeOnly. All celebrate - however, as is sometimes the issue, the type was introduced, but support for it? Not-so-much. The default serializer does not support it. Entity Framework does not support it. NHibernate does not support it. The list goes on. For SwashBuckle and the serializer, <a href="https://www.nuget.org/profiles/maxc137">maxc137</a> has come to the rescue with his <a href="https://www.nuget.org/packages/DateOnlyTimeOnly.AspNet">NuGet package</a>. Brilliant work - easy to install and the code does what it needs to do. Just remember to update your SwashBuckle version to at least 6.5.0 (or use the extra syntax as maxc137 writes on NuGet).</p>
<p>Honestly, I do not know how to add support in EF Core, but I do know how to do so in NHibernate - they have IUserType. Before this I already use it for DateTimes to ensure they are stored in UTC. The implementation can be found in the PR, it is not rocket science, so should be fairly easy to implement. And now we have Fiscal Periods in Anex.</p>
</div>
    <div class="post__footer">
      

      
    </div>

    
  </div>

      </main>
    </div><footer class="footer footer__base">
  <ul class="footer__list">
    <li class="footer__item">
      &copy;
      
        Magnus Toftdal
        2024
      
    </li>
    
  </ul>
</footer>
  
  <script
    type="text/javascript"
    src="/js/medium-zoom.min.1248fa75275e5ef0cbef27e8c1e27dc507c445ae3a2c7d2ed0be0809555dac64.js"
    integrity="sha256-Ekj6dSdeXvDL7yfoweJ9xQfERa46LH0u0L4ICVVdrGQ="
    crossorigin="anonymous"
  ></script></body>
</html>
